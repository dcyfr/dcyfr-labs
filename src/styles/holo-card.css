/**
 * Holographic Card Effect CSS Module v2.0
 * 
 * Simplified, high-performance holographic effects
 * Focus: Clean shine animation + fast rendering + simple maintenance
 * 
 * Performance optimizations:
 * - CSS containment for paint isolation
 * - will-change hints for GPU acceleration
 * - Reduced-motion support
 * - Single pseudo-element for shine effect
 * 
 * @see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations
 */

/* Core card container */
.holo-card {
  position: relative;
  overflow: hidden;
  contain: layout style paint;
}

/* Shine effect (Primary Feature) */
.holo-shine {
  position: absolute;
  inset: -100%;
  background: linear-gradient(
    110deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 60%,
    transparent 100%
  );
  opacity: 0;
  transform: translateX(-100%) translateY(-100%) rotate(30deg);
  transition: opacity 0.3s ease;
  pointer-events: none;
  will-change: transform, opacity;
  z-index: 10;
}

/* Hover state: trigger shine sweep */
.holo-card:hover .holo-shine {
  opacity: 1;
  animation: shine-sweep 1.2s ease-out;
}

@keyframes shine-sweep {
  0% {
    transform: translateX(-100%) translateY(-100%) rotate(30deg);
  }
  100% {
    transform: translateX(100%) translateY(100%) rotate(30deg);
  }
}

/* Dark mode: stronger shine */
@media (prefers-color-scheme: dark) {
  .holo-shine {
    background: linear-gradient(
      110deg,
      transparent 0%,
      transparent 40%,
      rgba(255, 255, 255, 0.4) 50%,
      transparent 60%,
      transparent 100%
    );
  }
}

/* Gradient overlays (Background Contrast) */
.holo-gradient-dark {
  background: linear-gradient(
    to bottom,
    hsl(var(--background) / 0.80),
    hsl(var(--background) / 0.92)
  );
  transition: background 0.3s ease;
}

.holo-gradient-dark-hover {
  background: linear-gradient(
    to bottom,
    hsl(var(--background) / 0.70),
    hsl(var(--background) / 0.88)
  );
}

/* Image effects */
.holo-image-shift {
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;
}

.holo-card:hover .holo-image-shift {
  transform: scale(1.05);
}

/* 3D lift effect */
.holo-card-3d {
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;
}

.holo-card-3d:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px -10px hsl(var(--primary) / 0.3);
}

/* Accessibility & Performance */

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  .holo-shine,
  .holo-image-shift,
  .holo-card-3d {
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
  
  .holo-card:hover .holo-shine {
    opacity: 0 !important;
  }
}

/* Disable effects on touch devices (performance) */
@media (hover: none) {
  .holo-shine {
    display: none;
  }
  
  .holo-card-3d:active {
    transform: scale(0.98);
  }
}

/* Text visibility fixes (Simplified) */

/* Define theme-aware text colors using CSS custom properties */
.holo-card {
  --holo-text: hsl(0 0% 100% / 0.95);
  --holo-text-muted: hsl(0 0% 100% / 0.75);
  --holo-text-heading: hsl(0 0% 100%);
}

@media (prefers-color-scheme: light) {
  .holo-card {
    --holo-text: hsl(var(--foreground) / 0.90);
    --holo-text-muted: hsl(var(--foreground) / 0.65);
    --holo-text-heading: hsl(var(--foreground));
  }
}

/* Apply to headings */
.holo-card h1:not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card h2:not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card h3:not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card h4:not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card h5:not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card h6:not([class*="text-zinc"]):not([class*="text-foreground"]) {
  color: var(--holo-text-heading);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

/* Apply to paragraphs */
.holo-card p:not([class*="text-zinc"]):not([class*="text-foreground"]) {
  color: var(--holo-text);
}

/* Apply to timestamps */
.holo-card time:not([class*="text-zinc"]):not([class*="text-foreground"]) {
  color: var(--holo-text-muted);
  font-weight: 500;
}

/* Apply to muted text */
.holo-card .text-muted-foreground:not([data-slot="badge"]):not([data-slot="badge"] *):not([class*="text-zinc"]):not([class*="text-foreground"]) {
  color: var(--holo-text-muted) !important;
}

/* Apply to text size variants */
.holo-card .text-xs:not([data-slot="badge"]):not([data-slot="badge"] *):not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card .text-sm:not([data-slot="badge"]):not([data-slot="badge"] *):not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card .text-base:not([data-slot="badge"]):not([data-slot="badge"] *):not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card .text-lg:not([data-slot="badge"]):not([data-slot="badge"] *):not([class*="text-zinc"]):not([class*="text-foreground"]) {
  color: var(--holo-text);
}

/* Apply to bold/semibold text */
.holo-card .font-semibold:not([data-slot="badge"]):not([data-slot="badge"] *):not(.inline-flex):not(.inline-flex *):not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card .font-bold:not([data-slot="badge"]):not([data-slot="badge"] *):not(.inline-flex):not(.inline-flex *):not([class*="text-zinc"]):not([class*="text-foreground"]),
.holo-card .font-medium:not([data-slot="badge"]):not([data-slot="badge"] *):not(.inline-flex):not(.inline-flex *):not([class*="text-zinc"]):not([class*="text-foreground"]) {
  color: var(--holo-text-heading);
}

/* Apply to links */
.holo-card a:not(.inline-flex):not([class*="button"]) {
  color: var(--holo-text);
}

.holo-card a:not(.inline-flex):not([class*="button"]):hover {
  color: hsl(var(--primary));
}

/* Badges: preserve their own text colors */
.holo-card [data-slot="badge"],
.holo-card [data-slot="badge"] * {
  text-shadow: none !important;
}

/* Buttons and link-buttons: reset to theme colors */
.holo-card button {
  color: inherit !important;
  text-shadow: none !important;
}

.holo-card button * {
  color: inherit !important;
  text-shadow: none !important;
}

.holo-card a.inline-flex {
  color: inherit !important;
  text-shadow: none !important;
}

.holo-card a.inline-flex * {
  color: inherit !important;
  text-shadow: none !important;
}

@media (prefers-color-scheme: light) {
  .holo-card a.inline-flex,
  .holo-card a.inline-flex span,
  .holo-card a.inline-flex svg {
    color: hsl(var(--foreground)) !important;
  }
  
  .holo-card a.inline-flex:hover,
  .holo-card a.inline-flex:hover span,
  .holo-card a.inline-flex:hover svg {
    color: hsl(var(--accent-foreground)) !important;
  }
}

/* Project image overlays */
.holo-project-image-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  background: linear-gradient(
    to bottom,
    hsl(var(--background) / 0.70),
    hsl(var(--background) / 0.85)
  );
}

@media (prefers-color-scheme: dark) {
  .holo-project-image-overlay {
    background: linear-gradient(
      to bottom,
      hsl(var(--background) / 0.60),
      hsl(var(--background) / 0.75)
    );
  }
}

/* Manual theme overrides */
[data-theme="light"] .holo-project-image-overlay {
  background: linear-gradient(
    to bottom,
    hsl(var(--background) / 0.70),
    hsl(var(--background) / 0.85)
  );
}

[data-theme="dark"] .holo-project-image-overlay {
  background: linear-gradient(
    to bottom,
    hsl(var(--background) / 0.60),
    hsl(var(--background) / 0.75)
  );
}
