{
  "repo_notes": [
    {
      "content": "dcyfr-labs is the production Next.js 15 application for DCYFR (https://www.dcyfr.ai). Built with App Router, React Server Components by default, and comprehensive automation. Tech stack: Next.js 15, Inngest (background jobs), Drizzle ORM (PostgreSQL), Upstash Redis (cache/rate limiting), NextAuth.js (authentication), Vercel (hosting).",
      "author": "DCYFR Workspace Agent"
    },
    {
      "content": "CRITICAL PATTERNS: (1) Design System - ALL UI components MUST use design tokens from src/lib/design-tokens.ts (SPACING.*, TYPOGRAPHY.*, SEMANTIC_COLORS.*). Target: 95%+ compliance. NO hardcoded Tailwind classes like space-y-*, text-*, mb-*. (2) API Pattern - All async API routes follow Validate→Queue→Respond using Inngest. Never block requests. (3) PageLayout - All pages use PageLayout component with layout='standard|focus|wide'.",
      "author": "DCYFR Workspace Agent"
    },
    {
      "content": "Priority documentation areas: src/components/ (design system, 95%+ token compliance required), src/app/api/ (Validate→Queue→Respond pattern, security-critical), src/lib/inngest/ (event handlers, async processing), src/lib/design-tokens.ts (canonical design token definitions), src/middleware.ts (request flow, auth checks).",
      "author": "DCYFR Workspace Agent"
    },
    {
      "content": "Security focus areas: All API routes must validate input, use Inngest for long-running work, verify NextAuth sessions for protected routes, never trust user input in URLs (SSRF risk), use Drizzle parameterized queries only. MCP servers in src/app/api/mcp/ accept untrusted JSON-RPC input. See .github/security/ for full security requirements.",
      "author": "DCYFR Workspace Agent"
    }
  ],
  "pages": [
    {
      "title": "Architecture Overview",
      "purpose": "High-level Next.js 15 architecture, core patterns (design tokens, API patterns, PageLayout), tech stack decisions, deployment model on Vercel Edge + Node.js serverless"
    },
    {
      "title": "Design System & UI Components",
      "purpose": "Complete design token system from src/lib/design-tokens.ts, PageLayout architecture (standard/focus/wide layouts), component patterns, 95%+ token compliance requirement, validation scripts",
      "parent": "Architecture Overview"
    },
    {
      "title": "Component Library",
      "purpose": "Detailed documentation of all UI components in src/components/, proper usage of design tokens, Server vs Client component patterns, barrel export structure",
      "parent": "Design System & UI Components"
    },
    {
      "title": "API Architecture & Patterns",
      "purpose": "Validate→Queue→Respond pattern, Inngest integration for async work, API route security requirements, authentication checks, error handling, rate limiting with Upstash",
      "parent": "Architecture Overview"
    },
    {
      "title": "API Routes Reference",
      "purpose": "Complete documentation of all API endpoints in src/app/api/, request/response formats, authentication requirements, Inngest event handlers, MCP server endpoints",
      "parent": "API Architecture & Patterns"
    },
    {
      "title": "Background Jobs & Events",
      "purpose": "Inngest event-driven architecture, function definitions in src/lib/inngest/, event schemas, retry logic, monitoring, debugging background jobs",
      "parent": "API Architecture & Patterns"
    },
    {
      "title": "Security Model",
      "purpose": "OWASP compliance, authentication with NextAuth.js, authorization patterns, input validation, SSRF prevention, XSS protection, MCP endpoint security, rate limiting, security scan instructions from .github/security/",
      "parent": "Architecture Overview"
    },
    {
      "title": "Data Layer",
      "purpose": "Drizzle ORM patterns, schema definitions, database migrations, connection pooling, query patterns, type safety with Drizzle queries",
      "parent": "Architecture Overview"
    },
    {
      "title": "Testing Strategy",
      "purpose": "Test framework setup (Vitest), unit test patterns, API route testing, component testing, coverage requirements (99%+ pass rate), E2E testing approach",
      "parent": "Architecture Overview"
    },
    {
      "title": "CI/CD & Automation",
      "purpose": "GitHub Actions workflows (.github/workflows/), automated quality gates (design tokens, SonarCloud, security scans), deployment pipeline, preview deployments, monitoring",
      "parent": "Architecture Overview"
    }
  ]
}
