# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to `.env.local` for local development.
# Never commit `.env.local` to version control.
#
# For production deployments (e.g., Vercel), configure these via the hosting
# platform's environment variable dashboard.
#
# See: https://nextjs.org/docs/app/building-your-application/configuring/environment-variables
# =============================================================================

# -----------------------------------------------------------------------------
# Site Configuration
# -----------------------------------------------------------------------------
# These are optional and have sensible defaults in `src/lib/site-config.ts`.
# Override only if you need different domains for testing or custom deployments.

# Full site URL (e.g., https://www.dcyfr.ai)
# Highest priority override for the site URL
# NEXT_PUBLIC_SITE_URL=https://www.dcyfr.ai

# Just the domain (e.g., www.dcyfr.ai)
# Will be prefixed with https:// automatically
# NEXT_PUBLIC_SITE_DOMAIN=www.dcyfr.ai

# Vercel environment (managed by Vercel, not needed locally)
# NEXT_PUBLIC_VERCEL_ENV=preview

# -----------------------------------------------------------------------------
# Background Jobs (Inngest)
# -----------------------------------------------------------------------------
# Optional: Required for production background job processing.
# In development, Inngest functions run without these keys using the Dev Server.
#
# Without these keys:
# - Contact form processed asynchronously (slower, ~1-2s)
# - No background job processing (GitHub cache, analytics, etc.)
# - Dev UI available at http://localhost:3000/api/inngest
#
# With these keys:
# - Contact form responds in < 100ms
# - Automatic retries on failures
# - Scheduled jobs (GitHub data refresh, analytics)
# - Production monitoring and debugging
#
# Get your keys at: https://app.inngest.com/
# Required for: production deployments

INNGEST_EVENT_KEY=
INNGEST_SIGNING_KEY=

# -----------------------------------------------------------------------------
# Email Configuration (Contact Form)
# -----------------------------------------------------------------------------
# Optional: Used for sending emails via contact form and blog milestone notifications.
# Without this, the contact form will log submissions and show a warning to users.
#
# Get your API key at: https://resend.com/api-keys
# REQUIRED for production email delivery

RESEND_API_KEY=

# Optional: Override the "from" email address for outgoing emails.
# Default: no-reply@www.dcyfr.ai (configured in src/lib/site-config.ts)
# Only needed if you want a different sender address.

# NEXT_PUBLIC_FROM_EMAIL=no-reply@yourdomain.com

# -----------------------------------------------------------------------------
# Error Tracking & Monitoring (Sentry)
# -----------------------------------------------------------------------------
# Optional but RECOMMENDED: Used for error tracking, performance monitoring, and uptime checks.
# Without Sentry configured, the app will work normally but errors won't be tracked.
#
# Get your DSN from: https://sentry.io/settings/dcyfr-labs-gj/projects/dcyfr-labs/keys/
#
# Without Sentry:
# - Errors logged to console only
# - No error tracking or alerts
# - No performance monitoring
# - No session replay
#
# With Sentry:
# - Real-time error tracking with stack traces
# - Performance monitoring (10% sample rate in production)
# - Session replay on errors (5% sample rate in production)
# - Source maps uploaded for better debugging
# - Uptime monitoring via /api/health endpoint
#
# The same DSN can be used for all three variables below.

# Server-side error tracking (Node.js runtime)
SENTRY_DSN=

# Client-side error tracking (browser)
# Must be prefixed with NEXT_PUBLIC_ to be available in the browser
NEXT_PUBLIC_SENTRY_DSN=

# Auth token for uploading source maps during build
# Get from: https://sentry.io/settings/account/api/auth-tokens/
# Required for CI/CD pipelines to upload source maps
# Note: For local builds, this is already configured in .env.sentry-build-plugin
SENTRY_AUTH_TOKEN=

# Organization and project slugs (already configured in next.config.ts)
# SENTRY_ORG=dcyfr-labs-gj
# SENTRY_PROJECT=dcyfr-labs

# -----------------------------------------------------------------------------
# GitHub Integration
# -----------------------------------------------------------------------------
# Optional: Used by the GitHub contributions heatmap on /projects page and
# the Activity feed on /activity page.
# Without this token, the API will use unauthenticated requests (lower rate limits).
#
# Create a personal access token at: https://github.com/settings/tokens
# Required scopes: public_repo (or just read:user for public profiles)
#
# Without this token:
# - GitHub API rate limit: 60 requests/hour per IP
# - GitHub activity will be excluded from /activity page
# - Server-side cache helps (5-minute cache in API route)
# - May hit rate limits during development
#
# With this token:
# - GitHub API rate limit: 5,000 requests/hour
# - Activity feed includes recent commits and releases
# - More reliable data fetching
# - Recommended for production deployments
#
# ⚠️  Note: Token must match the hardcoded username in the API route (dcyfr).
# For security, the API only allows fetching data for the portfolio owner.
# If token is invalid or expired, the Activity page will show other sources
# but exclude GitHub activities.

GITHUB_TOKEN=

# -----------------------------------------------------------------------------
# Unsplash Integration (Optional)
# -----------------------------------------------------------------------------
# Optional: Used for downloading royalty-free stock images for blog posts.
# Without this key, you can still use the SVG generator or manually add images.
#
# Setup Instructions:
# 1. Visit https://unsplash.com/developers
# 2. Create a new application
# 3. Copy your Access Key
# 4. Add here for CLI scripts (scripts/fetch-unsplash-image.mjs)
#
# Usage:
#   node scripts/fetch-unsplash-image.mjs --slug my-post --query "developer coding"
#
# ⚠️  Important: Unsplash requires attribution on all downloaded images.
# Always include credit field in post frontmatter.

UNSPLASH_ACCESS_KEY=

# -----------------------------------------------------------------------------
# Comments System (Giscus)
# -----------------------------------------------------------------------------
# Optional: Enables GitHub Discussions-powered comments on blog posts.
# Without these variables, the comments section will not appear (graceful degradation).
#
# Setup Instructions:
# 1. Enable GitHub Discussions on your repository:
#    - Go to: https://github.com/YOUR_USERNAME/YOUR_REPO/settings
#    - Check "Discussions" under Features
#
# 2. Configure Giscus and get your IDs:
#    - Visit: https://giscus.app/
#    - Follow the setup wizard
#    - Copy the generated values below
#
# 3. Create a Discussion category (recommended name: "Blog Comments")
#
# Without Giscus:
# - Blog posts work normally, but comments section is hidden
# - No errors or broken UI
#
# With Giscus:
# - Users can comment using their GitHub accounts
# - Comments sync with GitHub Discussions
# - Supports reactions, replies, and moderation

# GitHub repository in "owner/repo" format (e.g., "dcyfr/dcyfr-labs")
NEXT_PUBLIC_GISCUS_REPO=

# Repository ID (get from giscus.app)
NEXT_PUBLIC_GISCUS_REPO_ID=

# Discussion category name (e.g., "Blog Comments")
NEXT_PUBLIC_GISCUS_CATEGORY=

# Category ID (get from giscus.app)
NEXT_PUBLIC_GISCUS_CATEGORY_ID=

# -----------------------------------------------------------------------------
# Redis (View Counts & Rate Limiting)
# -----------------------------------------------------------------------------
# Optional but RECOMMENDED: Used for:
# 1. Blog post view counts
# 2. Distributed rate limiting across API routes
#
# Without Redis:
# - View tracking is disabled (graceful degradation, no errors)
# - Rate limiting falls back to in-memory (per-instance, not shared)
#
# With Redis:
# - View counts tracked across all deployments
# - Rate limiting shared across all serverless instances
# - Better protection against abuse and traffic spikes
#
# Get a free Redis instance at:
# - Vercel KV: https://vercel.com/docs/storage/vercel-kv (recommended for Vercel)
# - Upstash: https://upstash.com/ (platform-agnostic)
#
# Format: redis://default:password@host:port

REDIS_URL=

# -----------------------------------------------------------------------------
# Analytics Security
# -----------------------------------------------------------------------------
# Optional: Secures access to /api/analytics endpoint with API key authentication.
# Without this key, the analytics endpoint is completely disabled.
#
# The analytics endpoint provides sensitive data about blog post views, shares,
# and trending content. It's protected with 4 security layers:
# 1. API key authentication (this variable)
# 2. Environment blocking (disabled in production)
# 3. Rate limiting (5 requests/minute)
# 4. Audit logging (all access attempts logged)
#
# Generate a secure key:
#   openssl rand -base64 32
#
# Usage:
#   curl http://localhost:3000/api/analytics \
#     -H "Authorization: Bearer YOUR_KEY_HERE"
#
# ⚠️  IMPORTANT SECURITY NOTES:
# - NEVER enable in production environment (hard-blocked by code)
# - Only for development and preview deployments
# - Rotate keys periodically
# - Monitor access logs for suspicious activity
# - Never commit this key to version control
#
# Without this key:
# - Analytics endpoint returns 401 Unauthorized
# - No analytics data exposed
# - Server logs warning that endpoint is disabled

ADMIN_API_KEY=

# For accessing analytics UI at /analytics:
# This must be a NEXT_PUBLIC_ variable to be available in the browser
# Use the same key as ADMIN_API_KEY above
NEXT_PUBLIC_ADMIN_API_KEY=

# -----------------------------------------------------------------------------
# Analytics & Monitoring
# -----------------------------------------------------------------------------
# These are typically managed by Vercel automatically when deployed.
# No configuration needed for local development.

# Vercel Analytics (auto-configured on Vercel)
# https://vercel.com/analytics
# NEXT_PUBLIC_VERCEL_ANALYTICS_ID=

# Vercel Speed Insights (auto-configured on Vercel)
# https://vercel.com/docs/speed-insights
# NEXT_PUBLIC_VERCEL_SPEED_INSIGHTS_ID=

# -----------------------------------------------------------------------------
# Vercel: API token for deployments, MCP & platform APIs
# -----------------------------------------------------------------------------
# Optional: A Vercel personal token used for programmatic access to the Vercel
# dashboard, API, and MCP endpoints. This token enables operations like:
# - Reading deployments and logs via Vercel API
# - Using the Vercel MCP server for deployments/insights (mcp.vercel.com)
# - Uploading files and performing CI-related tasks
#
# Get a token at: https://vercel.com/account/tokens
# Recommended: create a scoped token for the repo/organization with only the
# needed permissions. Do NOT commit tokens to the repo.
#
# Supported environment variable names (the dev tools will check these):
# - VERCEL_TOKEN (common)
# - VERCEL_API_TOKEN (alternate)
# - VERCEL_ACCESS_TOKEN (alternate)
#
# We look for any of the above variables when checking Vercel MCP endpoints.
VERCEL_TOKEN=

# Optional: Vercel Analytics proxy endpoint
# A small proxy endpoint or Vercel API URL that returns a standardized JSON shape used
# to populate the analytics dashboard. When set together with VERCEL_TOKEN and
# VERCEL_PROJECT_ID the scheduled job `syncVercelAnalytics` will fetch data and store
# it in Redis for the analytics dashboard.
# Example: https://api.mysite.internal/vercel-analytics
VERCEL_ANALYTICS_ENDPOINT=

# -----------------------------------------------------------------------------
# Development Configuration
# -----------------------------------------------------------------------------
# NODE_ENV is automatically set by Next.js based on the command:
# - `npm run dev` → development
# - `npm run build` → production
# - `npm start` → production
#
# You typically don't need to set this manually.

# NODE_ENV=development

# Optional: Disable development-only pages (e.g., during testing)
# Set to "1" to hide dev pages like /dev/* even in development mode
# Default: dev pages visible in development, hidden in production

# DISABLE_DEV_PAGES=1

# Feature toggles (toggle on/off with 'true' or 'false')
# Set to 'true' to enable the horizontal filter chips on blog pages (mobile)
# Default: disabled (recommended)
NEXT_PUBLIC_FEATURE_HORIZONTAL_FILTER_CHIPS=false

# -----------------------------------------------------------------------------
# AI Research (Perplexity AI)
# -----------------------------------------------------------------------------
# Optional: Enables AI-powered research capabilities via /api/research endpoint.
# Without this key, the research endpoint will return a 503 (service unavailable).
#
# Setup Instructions:
# 1. Sign up at: https://www.perplexity.ai/settings/api
# 2. Get your API key from the dashboard
# 3. Add it to your .env.local file
#
# Without Perplexity:
# - Research endpoint is disabled (returns 503)
# - App functions normally otherwise
#
# With Perplexity:
# - AI-powered research with real-time web search
# - Automatic citation generation
# - Multiple model options (small, large, huge)
# - Search recency filters (hour, day, week, month)
# - Domain filtering capabilities
#
# Usage:
#   POST /api/research
#   {
#     "messages": [
#       { "role": "system", "content": "You are a helpful assistant." },
#       { "role": "user", "content": "What are the latest React patterns?" }
#     ],
#     "options": {
#       "model": "llama-3.1-sonar-large-128k-online",
#       "return_citations": true,
#       "search_recency_filter": "week"
#     }
#   }
#
# Rate Limits:
# - 5 requests per minute per IP (configured in /api/research)
# - Responses cached for 5 minutes (server-side)
#
# ⚠️  COST NOTES:
# - Perplexity is a paid API service
# - Monitor usage to control costs
# - Consider implementing additional rate limiting for production
#
# Get your API key at: https://www.perplexity.ai/settings/api

PERPLEXITY_API_KEY=

# -----------------------------------------------------------------------------
# QUICK START FOR LOCAL DEVELOPMENT
# -----------------------------------------------------------------------------
# For a minimal local setup, you can leave all values empty:
#
# 1. Copy this file:
#    cp .env.example .env.local
#
# 2. Start the dev server:
#    npm run dev
#
# The app will work with the following graceful degradation:
# ✅ Contact form shows but logs submissions (no email sent)
# ✅ GitHub heatmap works with lower rate limits (no token)
# ✅ Blog posts work without view counts (no Redis)
# ✅ All pages and features load successfully
#
# -----------------------------------------------------------------------------
# PRODUCTION SETUP
# -----------------------------------------------------------------------------
# For a production deployment, configure at minimum:
#
# REQUIRED:
# - RESEND_API_KEY (for contact form emails)
#
# RECOMMENDED:
# - SENTRY_DSN + NEXT_PUBLIC_SENTRY_DSN (for error tracking)
# - SENTRY_AUTH_TOKEN (for source map uploads in CI/CD)
# - GITHUB_TOKEN (for better rate limits on heatmap)
# - REDIS_URL (for view count tracking)
#
# OPTIONAL:
# - NEXT_PUBLIC_SITE_URL or NEXT_PUBLIC_SITE_DOMAIN (if custom domain)
#
# On Vercel, set these in: Project Settings → Environment Variables
# https://vercel.com/docs/projects/environment-variables