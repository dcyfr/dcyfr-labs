# Directory Cleanup - Phase 1 Analysis
**Date:** 2026-01-20
**Status:** Analysis Complete - Manual Deletion Required
**Analyzer:** Claude Code

---

## Executive Summary

Phase 1 analysis identified **~9MB of safe deletions** across test artifacts and configuration files. Due to permission restrictions on destructive operations, manual execution required.

**Key Findings:**
- ✅ Build artifacts already clean (.DS_Store, next-env.d.ts, build-output.log don't exist)
- ✅ Test artifacts identified for deletion (~9MB savings)
- ✅ Configuration files researched (2 safe to delete, 1 keep)
- ✅ CodeQL custom queries not in use (safe to archive)
- ✅ .gitignore coverage verified

---

## Recommended Deletions

### 1. Test Artifacts (~9MB) - SAFE TO DELETE

```bash
# E2E screenshots and design validation reports (regeneratable)
rm -rf reports/e2e-artifacts/        # 8.8MB
rm -rf reports/design-system/        # 8KB
rm -f reports/broken-links-report.json  # 104KB
```

**Justification:**
- All regenerate on test runs
- Already covered by `reports/.gitignore` (line 5: `*`)
- Historical reports preserved (accessibility-*.md, privacy-*.md, security-*.md)

**Risk:** NONE - Fully regeneratable
**Verification:** Run `npm run test:run` after deletion

---

### 2. Configuration Files (~1.5KB) - MIXED

#### Safe to Delete:

```bash
# Old AI workflow tool config (not referenced in package.json or workflows)
rm -f conductor.json                 # 707 bytes

# Redundant Lighthouse config (active config is lighthouserc.json)
rm -f lighthouse-config.json         # 176 bytes
```

**Justification:**
- `conductor.json`: Old workflow tool, references outdated branch "dcyfr/config-audit"
- `lighthouse-config.json`: Workflows use `lighthouserc.json` and `.github/lighthouse/ci.json`
- No references found in .github/workflows/ or scripts/

**Risk:** LOW - Not referenced in active workflows

#### Keep:

```bash
# KEEP: DeepCode/Snyk scanning configuration
# .dcignore (468 bytes)
```

**Justification:**
- May be used by Snyk/DeepCode security scanning
- Small file (468 bytes)
- No harm in keeping

---

### 3. CodeQL Custom Queries - ARCHIVE OR DELETE

```bash
# Custom CodeQL queries (not referenced in GitHub Actions)
codeql/custom/javascript/
├── codeql-pack.yml
├── codeql-pack.lock.yml
├── example.ql
└── javascript.testproj/
```

**Options:**

**Option A - Delete (Recommended):**
```bash
rm -rf codeql/custom/
```

**Option B - Archive:**
```bash
mkdir -p docs/security/archived/
mv codeql/custom/ docs/security/archived/codeql-custom-$(date +%Y%m%d)/
```

**Justification:**
- NOT referenced in `.github/workflows/codeql.yml`
- Appears to be example/test CodeQL pack
- Default CodeQL analysis is working without custom queries

**Risk:** LOW - Not used by CI/CD
**Estimated Size:** ~1KB

---

## .gitignore Coverage Verification

| File/Directory | Covered | Rule |
|----------------|---------|------|
| `.DS_Store` | ✅ YES | `.gitignore:54` |
| `next-env.d.ts` | ✅ YES | `.gitignore:175` |
| `reports/e2e-artifacts/` | ✅ YES | `reports/.gitignore:5` |
| `reports/design-system/` | ✅ YES | `reports/.gitignore:5` |
| `reports/broken-links-report.json` | ✅ YES | `reports/.gitignore:5` |
| `build-output.log` | N/A | File doesn't exist |
| `conductor.json` | ❌ NO | Not gitignored (safe to delete) |
| `lighthouse-config.json` | ❌ NO | Not gitignored (safe to delete) |
| `codeql/custom/` | ❌ NO | Not gitignored (may want to add) |

**Recommendation:** After deleting `codeql/custom/`, consider adding to `.gitignore` if it regenerates:
```bash
# Add to .gitignore if needed
echo "codeql/custom/" >> .gitignore
```

---

## Files Investigated - KEEP

### Certificates (3.2KB) - REQUIRED
```
certs/localhost+2.pem         # 1.7KB
certs/localhost+2-key.pem     # 1.5KB
```
**Why:** Required for `npm run dev:https`, regeneration requires mkcert

### Reports Archive (Historical Value)
```
reports/accessibility-audit-2025-12-28.md           # 13KB
reports/accessibility-completion-2025-12-28.md      # 9.9KB
reports/accessibility-resolution-2025-12-28.md      # 6.5KB
reports/industry-audit-status-2025-12-28.md         # 19KB
reports/privacy-analytics-enhancement-2025-12-28.md # 10KB
reports/privacy-contact-updates-2025-12-28.md       # 8.6KB
reports/privacy-policy-validation-2025-12-28.md     # 11KB
reports/security-privacy-audit-2026-01-11.md        # 12KB
```
**Why:** Compliance/audit trail, dated reports preserve project history

---

## Execution Instructions

### Pre-Flight Checklist
- [x] Git status clean ✅
- [x] Backup branch created (`cleanup-backup-20260120`) ✅
- [ ] Manual execution of deletions
- [ ] Post-deletion verification

### Execution Commands

```bash
# 1. Delete test artifacts (~9MB savings)
rm -rf reports/e2e-artifacts/ reports/design-system/ reports/broken-links-report.json

# 2. Delete unused config files (~1.5KB savings)
rm -f conductor.json lighthouse-config.json

# 3. Archive or delete CodeQL custom queries (~1KB savings)
rm -rf codeql/custom/  # OR move to docs/security/archived/

# 4. Verify directory sizes
du -sh reports/

# Expected result: reports/ should be ~100KB (down from 9.0MB)
```

### Post-Deletion Verification

```bash
# 1. TypeScript compilation
npm run typecheck

# 2. Linting
npm run lint

# 3. Test suite
npm run test:run

# 4. Build verification
npm run build

# 5. Git status (should show deleted files if not gitignored)
git status
```

**Success Criteria:**
- All tests pass (≥1185/1197)
- Build completes without errors
- TypeScript: 0 errors
- ESLint: 0 errors
- Lighthouse CI still works

---

## Expected Outcomes

### Storage Savings
| Category | Before | After | Savings |
|----------|--------|-------|---------|
| **reports/** | 9.0MB | ~100KB | ~8.9MB |
| **Config files** | ~1.5KB | 468B | ~1KB |
| **codeql/custom/** | ~1KB | 0 | ~1KB |
| **Total** | - | - | **~9MB** |

### Directory State
- Clean working directory
- Fast `git status`
- Clear separation: generated (gitignored) vs source (committed)
- All regeneratable artifacts removed

---

## Research Findings

### Lighthouse Configuration
- **Active configs:**
  - `lighthouserc.json` (root, 1.2KB)
  - `.github/lighthouse/ci.json` (workflow-specific)
  - `lighthouserc-deployment.json` (generated dynamically in CI)
- **Unused config:** `lighthouse-config.json` (safe to delete)

### Conductor.json
- Old AI workflow tool configuration
- References branch `dcyfr/config-audit` (doesn't match current workflow)
- Defines workspace with agent configs (claude-opus-4.5, claude-haiku-4.5)
- NOT referenced in `package.json` or GitHub Actions

### .dcignore
- DeepCode/Snyk Code scanning ignore patterns
- Minimal file (48 lines)
- May be used by security scanning tools
- Recommended to keep (low impact, potential use)

### CodeQL Custom Queries
- Located in `codeql/custom/javascript/`
- Contains example query pack (example.ql, test project)
- NOT referenced in `.github/workflows/codeql.yml`
- Default CodeQL scanning works without custom queries

---

## Phase 2 Planning (Future Session)

### Heavy Directories (Deferred)
These require fresh context window for detailed analysis:

1. **docs/** (9.6MB, 41 subdirectories)
   - Archive obsolete migration guides
   - Consolidate redundant documentation
   - Move completed todos to done.md

2. **.claude/** (9.1MB)
   - Consolidate 66 agents (identify duplicates)
   - Clean up 25 skills (remove unused)
   - Archive 50 commands (unused)
   - Review settings.local.json (17KB)

3. **.opencode/** (~5MB estimated)
   - Delete node_modules if exists
   - Keep active scripts and config

**Expected Additional Savings:** 5-10MB

---

## Risk Assessment Summary

| Item | Risk Level | Mitigation |
|------|------------|------------|
| Test artifacts | NONE | Fully regeneratable |
| conductor.json | LOW | Not referenced anywhere |
| lighthouse-config.json | LOW | Active config is lighthouserc.json |
| codeql/custom/ | LOW | Not used by CI/CD |
| .dcignore | N/A | Keeping (potential security tool use) |

**Overall Risk:** LOW - All deletions are safe

---

## Notes

- Permission restrictions prevented automated deletion
- All research completed successfully
- Backup branch exists: `cleanup-backup-20260120`
- Git working directory clean at start
- Test health: 1185/1197 passing (99.0%)

---

**Prepared By:** Claude Code
**Reviewed:** Pending manual execution
**Next Steps:** Execute deletion commands, run verification suite, commit results
